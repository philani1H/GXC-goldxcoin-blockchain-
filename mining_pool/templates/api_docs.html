<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Documentation - {{ pool_name|title }} Pool</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .bg-gxc { background: var(--primary-gradient); }
        code { background: #f4f4f4; padding: 2px 6px; border-radius: 3px; }
        pre { background: #f4f4f4; padding: 1rem; border-radius: 5px; }
    </style>
</head>
<body>
    {% include '_nav.html' %}

    <div class="container mt-4">
        <h2 class="mb-4"><i class="fas fa-code me-2"></i>API Documentation</h2>
        
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">Base URL</h5>
            </div>
            <div class="card-body">
                <code>{{ base_url }}</code>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">GET /api/stats</h5>
            </div>
            <div class="card-body">
                <p>Get pool statistics</p>
                <h6>Response:</h6>
                <pre>{
  "pool_name": "{{ pool_name }}",
  "algorithm": "{{ algorithm }}",
  "active_miners": 10,
  "total_shares": 1000,
  "blocks_found": 5,
  "difficulty": 1000.0
}</pre>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">GET /api/miners</h5>
            </div>
            <div class="card-body">
                <p>Get list of active miners</p>
                <h6>Response:</h6>
                <pre>[
  {
    "miner_id": "miner1",
    "username": "miner1",
    "address": "GXC...",
    "accepted_shares": 100,
    "hash_rate": 1000.0
  }
]</pre>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">GET /api/blocks</h5>
            </div>
            <div class="card-body">
                <p>Get recent blocks found by the pool</p>
                <h6>Response:</h6>
                <pre>[
  {
    "block_hash": "0x...",
    "block_number": 12345,
    "miner_id": "miner1",
    "reward": 50.0,
    "found_at": "2024-01-01T12:00:00"
  }
]</pre>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">Stratum Protocol</h5>
            </div>
            <div class="card-body">
                <p>The pool uses the Stratum protocol for miner connections:</p>
                <p><strong>URL:</strong> <code>stratum+tcp://{{ pool_name }}.gxc.network:3333</code></p>
                <p><strong>Methods:</strong></p>
                <ul>
                    <li><code>mining.subscribe</code> - Subscribe to mining jobs</li>
                    <li><code>mining.authorize</code> - Authorize miner</li>
                    <li><code>mining.submit</code> - Submit share</li>
                </ul>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

