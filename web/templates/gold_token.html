<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gold Token (GXC-G) Explorer | GXC Explorer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            --light-bg: #f8fafc;
        }
        body { font-family: 'Inter', sans-serif; background: var(--light-bg); }
        .bg-gold { background: var(--primary-gradient); box-shadow: 0 4px 20px rgba(245, 158, 11, 0.3); }
        .card { border-radius: 16px; border: 1px solid #e5e7eb; background: white; }
        .stat-card { text-align: center; padding: 1.5rem; background: linear-gradient(135deg, rgba(245, 158, 11, 0.05), rgba(217, 119, 6, 0.05)); border-radius: 12px; }
        .stat-value { font-size: 2rem; font-weight: 800; color: #f59e0b; }
        .stat-label { font-size: 0.85rem; color: #64748b; text-transform: uppercase; margin-top: 0.5rem; }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-gold">
        <div class="container">
            <a class="navbar-brand fw-bold" href="/"><i class="fas fa-coins me-2"></i>GXC Explorer</a>
            <div class="navbar-nav ms-auto">
                <a href="/" class="nav-link">Home</a>
                <a href="/gold" class="nav-link active">Gold Tokens</a>
            </div>
        </div>
    </nav>

    <div class="container mb-5 mt-4">
        <div class="page-header mb-4">
            <h1 class="display-5 fw-bold"><i class="fas fa-coins me-3"></i>Gold Token (GXC-G) Explorer</h1>
            <p class="lead">Track gold-backed tokens, reserves, and transfers</p>
        </div>

        <!-- Stats Overview -->
        <div class="row g-3 mb-4">
            <div class="col-md-3">
                <div class="stat-card">
                    <div class="stat-value">{{ "%.2f" % stats.total_supply }}</div>
                    <div class="stat-label">Total Supply (GXC-G)</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card">
                    <div class="stat-value">{{ "%.2f" % stats.total_reserves }}</div>
                    <div class="stat-label">Gold Reserves (grams)</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card">
                    <div class="stat-value">{{ "%.1f" % stats.reserve_ratio }}%</div>
                    <div class="stat-label">Reserve Ratio</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card">
                    <div class="stat-value">{{ "{:,}".format(stats.unique_addresses) }}</div>
                    <div class="stat-label">Unique Addresses</div>
                </div>
            </div>
        </div>

        <!-- Gold Reserves -->
        <div class="card mb-4">
            <div class="card-header bg-white">
                <h5 class="mb-0"><i class="fas fa-vault text-warning me-2"></i>Gold Reserves</h5>
            </div>
            <div class="card-body">
                {% if reserves %}
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Vault ID</th>
                                <th>Vault Address</th>
                                <th>Gold (grams)</th>
                                <th>Status</th>
                                <th>Last Audit</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for reserve in reserves %}
                            <tr>
                                <td>{{ reserve.vault_id }}</td>
                                <td><code>{{ reserve.vault_address[:20] }}...</code></td>
                                <td><strong>{{ "%.2f" % reserve.gold_grams }}</strong></td>
                                <td>
                                    {% if reserve.is_active %}
                                    <span class="badge bg-success">Active</span>
                                    {% else %}
                                    <span class="badge bg-secondary">Inactive</span>
                                    {% endif %}
                                </td>
                                <td>{{ reserve.last_audit_time or 'N/A' }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% else %}
                <p class="text-muted text-center">No reserves data available</p>
                {% endif %}
            </div>
        </div>

        <!-- Recent Transfers -->
        <div class="card mb-4">
            <div class="card-header bg-white">
                <h5 class="mb-0"><i class="fas fa-exchange-alt text-warning me-2"></i>Recent Transfers</h5>
            </div>
            <div class="card-body">
                <div id="transfersList">
                    <p class="text-muted text-center">Loading transfers...</p>
                </div>
            </div>
        </div>

        <!-- Top Holders -->
        <div class="card">
            <div class="card-header bg-white">
                <h5 class="mb-0"><i class="fas fa-trophy text-warning me-2"></i>Top Holders</h5>
            </div>
            <div class="card-body">
                {% if stats.top_holders %}
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Address</th>
                                <th>Balance (GXC-G)</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for holder in stats.top_holders %}
                            <tr>
                                <td>{{ loop.index }}</td>
                                <td><a href="/address/{{ holder.address }}">{{ holder.address[:20] }}...</a></td>
                                <td><strong>{{ "%.8f" % holder.balance }}</strong></td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% else %}
                <p class="text-muted text-center">No holders data available</p>
                {% endif %}
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        async function loadTransfers() {
            try {
                const response = await fetch('/api/gold/transfers?limit=20');
                const transfers = await response.json();
                
                const container = document.getElementById('transfersList');
                if (transfers.length === 0) {
                    container.innerHTML = '<p class="text-muted text-center">No transfers found</p>';
                    return;
                }
                
                let html = '<div class="table-responsive"><table class="table"><thead><tr><th>Type</th><th>From</th><th>To</th><th>Amount</th><th>Time</th></tr></thead><tbody>';
                
                transfers.forEach(tx => {
                    html += `
                        <tr>
                            <td><span class="badge bg-${tx.type === 'mint' ? 'success' : tx.type === 'burn' ? 'danger' : 'primary'}">${tx.type}</span></td>
                            <td>${tx.from ? '<a href="/address/' + tx.from + '">' + tx.from.substring(0, 16) + '...</a>' : 'N/A'}</td>
                            <td>${tx.to ? '<a href="/address/' + tx.to + '">' + tx.to.substring(0, 16) + '...</a>' : 'N/A'}</td>
                            <td><strong>${tx.amount.toFixed(8)} GXC-G</strong></td>
                            <td><a href="/tx/${tx.tx_hash}">View</a></td>
                        </tr>
                    `;
                });
                
                html += '</tbody></table></div>';
                container.innerHTML = html;
            } catch (error) {
                console.error('Error loading transfers:', error);
            }
        }
        
        loadTransfers();
    </script>
</body>
</html>

